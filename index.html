<!DOCTYPE HTML>
<html>

<head>
    <title>Drag and Drop Task Management</title>
    <style>
        .add{
            padding:10px;
           
        }
        h1{
            color:white;
        }
        .card {
            width: 200px;
            min-height: 50px;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #aaaaaa;
            
        }
        body{
            background: linear-gradient(97.78deg, var(--ds-background-accent-purple-bolder, #4423a3) 17.5%, var(--ds-background-accent-magenta-subtle, #aa63cb) 113.39%);

        }

        .column {
            width: 400px;
            min-height: 400px;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #aaaaaa;
            background-color: rgb(224, 172, 172);
            margin:5px;
            border-radius: 20px;
        }

        .container {
            display: flex;
            flex-direction: row;
            
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
        }
    

        .modal-content {
            background-color: #fefefe;
            margin: 20% auto;
            padding: 20px;
            width: 60%;
        }
    </style>
    <script>
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            ev.target.appendChild(document.getElementById(data));
        }

        function addTask() {
            var taskInput = document.getElementById("task-input");
            var task = taskInput.value;
            if (task.trim() !== "") {
                var newTaskElement = document.createElement("div");
                newTaskElement.draggable = true;
                newTaskElement.id = "task-" + Math.floor(Math.random() * 1000);
                newTaskElement.textContent = "Task Name: " + task;
                newTaskElement.className = "card";
                newTaskElement.addEventListener("dragstart", function (event) {
                    event.dataTransfer.setData("text", event.target.id);
                });

                newTaskElement.addEventListener("click", function (event) {
                    showModal(event.target.id);
                });

                document.getElementById("open-column").appendChild(newTaskElement);
                taskInput.value = "";
            }
        }


        function showModal(taskId) {
            var modal = document.createElement("div");
            modal.className = "modal";
            modal.innerHTML = `
        <div class="modal-content">
          <h3>Task Description</h3>
          <textarea id="description-input" rows="4" cols="30"></textarea>
          <br>
          <button onclick="saveDescription('${taskId}')">Save</button>
        </div>
      `;

            document.body.appendChild(modal);

            modal.style.display = "block";
        }

        function saveDescription(taskId) {
            var descriptionInput = document.getElementById("description-input");
            var description = descriptionInput.value;

            var taskElement = document.getElementById(taskId);
            taskElement.dataset.description = description;
            // append description to task element
            var descriptionElement = document.createElement("p");
            descriptionElement.textContent = "Description: " + description;
            taskElement.appendChild(descriptionElement);


            closeModal();
        }

        function closeModal() {
            var modal = document.querySelector(".modal");
            modal.parentNode.removeChild(modal);
        }

    </script>
</head>

<body>

    <h1>Task Management</h1>
    <div class="container">
        <div class="column" id="open-column" ondrop="drop(event)" ondragover="allowDrop(event)">
            <h2>Open</h2>
            <div class="add">
                <input type="text" id="task-input" placeholder=" Create a task">
                <button onclick="addTask()">+</button>
            </div>
        </div>
        <div class="column" id="inprogress-column" ondrop="drop(event)" ondragover="allowDrop(event)">
            <h2>In Progress</h2>
        </div>
        <div class="column" id="inreview-column" ondrop="drop(event)" ondragover="allowDrop(event)">
            <h2>In Review</h2>
        </div>
        <div class="column" id="done-column" ondrop="drop(event)" ondragover="allowDrop(event)">
            <h2>Done</h2>
        </div>
    </div>
    
</body>

</html>